<%# Wizard Card - Single field with 3D flip animation %>
<%# locals: field, form, submission, index %>

<div class="wizard-card <%= 'hidden' unless index == 0 %>"
     data-wizard-target="card"
     data-index="<%= index %>">

  <div class="card bg-base-100 shadow-xl min-h-[300px] transform-style-3d">
    <div class="card-body relative">
      <%# Field Number Badge %>
      <div class="absolute -top-3 -left-3 z-10">
        <span class="badge badge-primary badge-lg font-bold shadow-md">
          <%= index + 1 %>
        </span>
      </div>

      <%# Section Label %>
      <% if field.section.present? %>
        <div class="text-xs uppercase tracking-wide text-primary/70 font-medium mb-1">
          <%= field.section.to_s.titleize %>
        </div>
      <% end %>

      <%# Field Label - Larger for wizard mode %>
      <div class="mb-4">
        <label class="text-xl font-semibold text-base-content" for="submission_<%= field.name %>">
          <%= field.label || field.name.titleize %>
          <% if field.required %>
            <span class="text-error">*</span>
          <% end %>
        </label>
      </div>

      <%# Field Input - Centered and prominent %>
      <div class="wizard-field-content py-4 flex-grow">
        <div class="max-w-md mx-auto">
          <%= render partial: "forms/fields/#{field.field_type}",
                     locals: { field: field, form: form, submission: submission } %>
        </div>
      </div>

      <%# Help Text / Context %>
      <% if field.help_text.present? %>
        <div class="mt-4">
          <div class="alert bg-info/10 border-info/20 text-sm">
            <svg class="w-5 h-5 shrink-0 text-info" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="text-base-content/80"><%= field.help_text %></span>
          </div>
        </div>
      <% end %>

      <%# Required indicator %>
      <% if field.required %>
        <div class="mt-2 text-xs text-base-content/50 text-center">
          This field is required
        </div>
      <% end %>
    </div>
  </div>
</div>
